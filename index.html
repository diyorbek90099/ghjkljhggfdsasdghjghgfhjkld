<!doctype html>
<html lang="uz">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bakhtiyor Oshi - O'zbek Milliy Taomlar</title>
    <link rel="stylesheet" href="style.css">
    <style>
      /* Qo‘shimcha modal uchun */
      .modal-overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; }
      .modal-overlay.active { display:flex; }
      .modal { background:#fff; border-radius:12px; padding:20px; max-width:500px; width:90%; position:relative; }
      .modal img { width:100%; border-radius:8px; margin-bottom:15px; }
      .modal h3 { margin:10px 0; color:#ef4444; }
      .modal .close-btn { background:#ef4444; border:none; color:#fff; padding:6px 12px; border-radius:6px; cursor:pointer; position:absolute; top:10px; right:10px; }
      .detail-info p { margin:5px 0; }
      .detail-footer { margin-top:15px; text-align:right; }
      .detail-footer button { background:#ef4444; color:#fff; border:none; padding:8px 15px; border-radius:6px; cursor:pointer; }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>O'zbek Milliy Taomlar</h1>
                    </div>
                </div>
                <div class="header-info">
                    <div class="contact-item">
                        <span>+998 90 123 45 67</span>
                    </div>
                    <div class="contact-item">
                        <span>Toshkent, Amir Temur ko'chasi</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav style="background:white; padding:1rem 0; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
        <div class="container">
            <div style="display:flex; gap:2rem; justify-content:center;">
                <a href="index.html" style="text-decoration:none; color:#ef4444; font-weight:600; padding:0.5rem 1rem; border-radius:8px; background:#fef2f2;">Bosh sahifa</a>
                <a href="shop.html" style="text-decoration:none; color:#6b7280; font-weight:600; padding:0.5rem 1rem; border-radius:8px;">Do'kon</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h2 class="hero-title">
                    O'zbek Milliy <span class="gradient-text">Taomlar</span>
                </h2>
                <p class="hero-description">
                    Eng mazali va sifatli o'zbek milliy taomlarini buyurtma qiling.
                </p>
            </div>
        </div>
    </section>

    <!-- Category Filter -->
    <section class="categories">
        <div class="container">
            <div class="category-buttons" id="categoryButtons">
                <!-- Categories JS orqali qo‘shiladi -->
            </div>
        </div>
    </section>

    <!-- Menu Grid -->
    <section class="menu">
        <div class="container">
            <div class="menu-grid" id="menuGrid">
                <!-- Menu items JS orqali qo‘shiladi -->
            </div>
        </div>
    </section>

    <!-- Detail Modal -->
    <div class="modal-overlay" id="detailModal">
      <div class="modal">
        <button class="close-btn" id="closeDetail">X</button>
        <div id="detailContent"></div>
      </div>
    </div>

    <!-- Order Modal (sening eski modalin) -->
    <div class="modal-overlay" id="orderModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Buyurtma berish</h3>
                <button class="close-btn" id="closeModal">X</button>
            </div>
            <div class="modal-content">
                <div class="selected-item" id="selectedItem"></div>
                <div class="quantity-section">
                    <label>Miqdori</label>
                    <div class="quantity-controls">
                        <button class="quantity-btn" id="decreaseQty">-</button>
                        <span class="quantity-display" id="quantityDisplay">1</span>
                        <button class="quantity-btn" id="increaseQty">+</button>
                    </div>
                </div>
                <div class="payment-form">
                    <div class="form-group">
                        <label>Karta raqami</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                    </div>
                    <div class="form-group">
                        <label>Amal qilish muddati (Oy/Yil)</label>
                        <input type="text" id="expiryDate" placeholder="12/25" maxlength="5">
                    </div>
                </div>
                <div class="total-section">
                    <div class="total-row">
                        <span>Jami:</span>
                        <span class="total-price" id="totalPrice">0 so'm</span>
                    </div>
                </div>
                <button class="order-btn" id="confirmOrder" disabled>Buyurtmani tasdiqlash</button>
                <p class="disclaimer">* Bu test versiya. Haqiqiy to'lov olinmaydi.</p>
            </div>
        </div>
    </div>

    <script src="db.js"></script>
    <script src="script.js"></script>
    <script>
      // Detail modal uchun qo‘shimcha JS
      const detailModal = document.getElementById('detailModal');
      const detailContent = document.getElementById('detailContent');
      const closeDetail = document.getElementById('closeDetail');

      // Taom ustiga bosilganda ko‘rsatish
      function showDetail(itemId) {
        const item = menuItems.find(i => i.id === itemId);
        detailContent.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <h3>${item.name}</h3>
          <div class="detail-info">
            <p>${item.description}</p>
            <p><b>Narxi:</b> ${item.price.toLocaleString()} so'm</p>
            <p><b>Pishirish vaqti:</b> ${item.cookTime}</p>
            <p><b>Reyting:</b> ${item.rating} ★</p>
          </div>
          <div class="detail-footer">
            <button onclick="openOrderModal(${item.id})">Buyurtma berish</button>
          </div>
        `;
        detailModal.classList.add('active');
      }

      closeDetail.addEventListener('click', () => {
        detailModal.classList.remove('active');
      });

      // script.js dagi renderMenuItems ni yangilash:
      document.addEventListener('DOMContentLoaded', () => {
        const menuGrid = document.getElementById('menuGrid');
        menuGrid.innerHTML = '';
        menuItems.forEach(item => {
          const div = document.createElement('div');
          div.className = 'menu-item';
          div.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <div class="menu-item-content">
              <h3 class="menu-item-title">${item.name}</h3>
              <div class="menu-item-price">${item.price.toLocaleString()} so'm</div>
            </div>
          `;
          div.addEventListener('click', () => showDetail(item.id));
          menuGrid.appendChild(div);
        });
      });
    </script>
  </body>
</html>
